version: '3.8'

services:
  lanshare:
    image: zhong12138/lanshare:latest  # 替换为你的Docker Hub用户�?    container_name: lanshare-app
    ports:
      - "7070:7070"
    volumes:
      - ./uploads:/app/uploads
      - ./data:/app/data
    restart: unless-stopped
    environment:
      - FLASK_ENV=production
      - DOCKER_CONTAINER=true
      # 重要：请将下面的IP地址修改为你的宿主机局域网IP
      # 例如：如果你的电脑在局域网中的IP是192.168.1.100，请改为这个
      - HOST_IP=192.168.1.100
      - DOCKER_HOST_IP=192.168.1.100
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:7070/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

networks:
  default:
    name: lanshare-network
